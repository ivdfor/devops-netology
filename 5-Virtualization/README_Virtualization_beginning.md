### Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

#### Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

```
Ответ

Полная (аппаратная) виртуализация - хостовая система является по сути своей ОС для гостевых систем, устанавливается непосредственно на физический хост,
напрямую управляет его аппаратными компонентами и выделяет его ресурсы для гостевых систем, следит за изоляцией гостей между собой и изолированием их от
прямого воздействия как на аппаратную часть, так и на другие гостевые системы. Главный минус- зависимость от реализации гипервизора- поддержка только реализованных
его разработчиками аппаратных возможностей.

Паравиртуализация- гипервизор является как бы посредником в части выделения ресурсов между ОС и гостевыми системами. С одной стороны, получаем гибкость и независимость
относительно ОС-подложки и аппаратных компонентов (так как ими управляет ОС, а гипервизор запрашивает необходимое), 
а с другой- теряем в производительности- гипервизор является посредником, не в состоянии сам принимать решение, и теряется время на обработку запросов от гостевой системы
сначала гипервизором, потом ОС.

Виртуализация на основе ОС- гипервизор как таковой отсутствует, гостевые системы не могут быть с другой ОС относительно хостовой машины, т.к. они не являются самостоятельным
объектом, их управлением занимается сама хостовая ОС. Ядро ОС в отсутствии гипервизора 
самостоятельно по запросам гостевых систем выделяет ресурсы и изолирует хосты друг от друга, хосты работают по сути своей как изолированные физические сервера, ничего не зная о параллельно
работающих других серверах.
```

#### Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

физические сервера,
паравиртуализация,
виртуализация уровня ОС.
Условия использования:

Высоконагруженная база данных, чувствительная к отказу.
Различные web-приложения.
Windows системы для использования бухгалтерским отделом.
Системы, выполняющие высокопроизводительные расчеты на GPU.
Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

физические сервера - 
Высоконагруженная база данных, чувствительная к отказу.
Системы, выполняющие высокопроизводительные расчеты на GPU.

```
Ответ

Высоконагруженным базам данных и высокопроизводительным системам для эффективного выполнения ожидаемого от них функционала требуется как можно более производительная система,
напрямую обращающаяся к аппаратным ресурсам физического хоста и быстро и самостоятельно определяющая возможность выделения доступных аппаратных ресурсов.
Кроме того, такие базы данных и высокопроизводительные системы критичны к безопасности, изоляции ресурсов друг от друга, надежности и гарантии выделения необходимых им ресурсов, 
а так же в наличии готовых иструментов для кластеризации, репликации данных и систем управления ими из единого центра (например Vmware Vsphere+ESXi).

Паравиртуализация - Windows системы для использования бухгалтерским отделом.

Т.к. бухгалтерские системы не столь требовательны к аппаратным ресурсам, то мы можем вполне использовать паравиртуализацию,
пренебречь главным плюсом аппаратной виртуализации- скоростью распределения и выделения ресурсов, 
и ограничится не дорогими либо бесплатными системами паравиртуализации (например для Windows: Hyper-V, VirtualBox).

виртуализация уровня ОС - Различные web-приложения.

Различные web-приложения - т.к. обычно популярные веб-приложения, веб-сервера созданы под *nix-системы, можно развернуть веб-сервисы под *nix, не вступая в противоречие
с концепцией того, что хостовая и гостевая ОС вынуждены быть одинаковыми. За счет того, что обслуживание ресурсов управляется непосредственно ОС, минуя отсутствующий гипервизор,
скорость обработки и выполнения запросов от гостевых машин достаточно высока для выполнения поставленных задач.
```    

#### Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, 
репликации данных и автоматизированного механизма создания резервных копий.

Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.


```
Ответ

1) Наиболее удобным вариантом было бы использование Vmware Vsphere+ESXi, т.к. управлять 100 машинами при таком решении удобно, наименее трудозатратно, это решение
поддерживает перечисленные реализации программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий, кроме того, возможно осуществление
платной, но зато быстрой и качественной техподдержки производителя. Возможно обучение персонала на авторизованных курсах и сертификация.

2) Видимо, наиболее очевидным вариантом является KVM+Proxmox, бесплатное open-source решение, широко используемое, возможно развертывание на его базе и Linux и Windows ВМ, 
в свободном доступе масса информации по развертыванию и обслуживани.

3) Для виртуализации Windows инфраструктуры однозначно подходит собственное вендорское высокопроизводительное бесплатное решение от Microsoft- Free Hyper-V Server. 
Естественно, оно максимально совместимо, бесплатно (но хосты в любом случае необходимо лицензировать), хорошо задокументированно.

4) Для тестирования ПО на нескольких дистрибутивах Linux наиболее оптимальным вариантом выглядит работа в Docker или LXC, что позволяет создавать контейнеры для тестирования и использовать автоматизацию.     
```


#### Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. 
Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

```
Ответ:

Гетерогенные среды виртуализации в любом случае требуют развертывания нескольких сред и систем их управления, соответственно, трудозатраты на развертывание в таком случае возрастают пропорционально их количеству, 
стоимость самих систем в случае использования не open-source решений так же суммируется согласно стоимости каждой в отдельности,
кроме того, персонал, обслуживающий гетерогенные среды, должен быть либо высокопрофессионален и уметь обслуживать все различные используемые системы, что мало того, что финансово дорого, 
но, и, в случае увольнения/перемещения сотрудников либо расширения системы, может приводить к тому, 
что на рынке труда просто не будут быстро найдены кадры с соответствующей достаточной квалификацией в приемлимый срок.
Либо персонал должен быть дифференцирован в зависимости от среды обслуживания, что так же не оптимально- необходимо для поддержания систем большее количество сотрудников, 
обеспечение их рабочими местами, оборудованием и т.д.
С технической точки зрения возможно не совсем оптимальное разделение аппаратных ресурсов серверов между системами, например, на определенном сервере/ах установлена одна среда, 
и там есть достаточно большой запас аппаратных ресурсов, но в связи с необходимостью в аппаратных ресурсах в другой среде, 
вынуждено будет приобретен дополнительный сервер/сервера, плюс сопутствующее оборудование и системы электропитания, ветиляции и т.п.,
кроме того, возможно, появится необходимость для удобства обслуживания физически разделять сервера и их инфраструктуру (серверные, стойки, сетевую инфраструктуру/оборудование, СКС, ИБП).
В идеальном мире я бы выбрал гомогенную среду- обслуживание гомогенной системы проще, универсальнее, дешевле, оптимальнее в части аппаратных ресурсов и т.п.,
хотя, конечно, в гетерогенной структуре есть определенные плюсы- например, нет привязки к одной системе/вендору, в связи с тем, что из-за какого-либо форс-мажора потребуется полная миграция из какой-либо системы в другую существующую, 
это будет сделать гораздо проще при том, что альтернативная система уже развернута и имеется квалифицированный персонал, обслуживающий ее. 
``` 



